<input
  [(ngModel)]="nomePaziente"
  pInputText
  type="text"
>
<p>Nome PZ: {{ nomePaziente() || 'none' }}</p>
<p>Pazienti presenti in PS: {{ filteredList().length }}</p>
<hr>

@let srv = healthStatus().service;
@let db = healthStatus().database;
@let uptime = healthStatus().uptime;
<ul class="flex flex-row items-center-safe gap-4 p-4">
  <li>Service:
    <p-tag
      [severity]="srv === 'UP' ? 'success' : 'danger'"
      value="{{ srv }}"
    />
  </li>
  <li>Database:
    <p-tag
      [severity]="db === 'CONNECTED' ? 'success' : 'danger'"
      value="{{ db }}"
    />
  </li>
  <li>Uptime:
    <p-tag
      [severity]="uptime > -1 ? 'success' : 'danger'"
      value="{{ uptime }}"
    />
  </li>
  <li>
    <p-button
      (onClick)="getAdmissionList()"
      [disabled]="db !== 'CONNECTED'"
      label="Refresh pazienti"
      severity="info"
    />
    <p-button
      (onClick)="getAdmissionList2()"
      [disabled]="db !== 'CONNECTED'"
      label="Refresh pazienti 2"
      severity="info"
    />
  </li>
</ul>

<hr>
<!--
-   quadrata: Padre -> Figlio
-   rotonda: Figlio -> Padre
-->
<div
  class="flex flex-wrap flex-row gap-4 p-4"
>
  @for (paziente of filteredList(); track paziente.braccialetto) {
    <his-card-pz [borderTop]="false" [paziente]="paziente"/>
    <p-button
      (onClick)="editNomePaziente(paziente.nome)"
      label="edit"
    ></p-button>
  } @empty {
    <h1>Nessun paziente in attesa</h1>
  }
</div>
